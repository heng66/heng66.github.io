<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="规范的代码，可以有效的提高代码的可读性和可维护性。我们在写代码的过程当中，应该有个这样的规范来约束自己，这在团队开发过程中显得尤为重要。此文列举的iOS代码规范，并不一定是一个完备的规范，后续会不断的进行补充和完善。 代码结构清晰的代码结构有利于代码的传承，增强可读性和可维护性。 123456789推荐：#pragma mark - Life cycle#pragma mark - Publi">
<meta property="og:type" content="article">
<meta property="og:title" content="代码规范">
<meta property="og:url" content="http://yoursite.com/2020/04/05/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/index.html">
<meta property="og:site_name" content="chenqg">
<meta property="og:description" content="规范的代码，可以有效的提高代码的可读性和可维护性。我们在写代码的过程当中，应该有个这样的规范来约束自己，这在团队开发过程中显得尤为重要。此文列举的iOS代码规范，并不一定是一个完备的规范，后续会不断的进行补充和完善。 代码结构清晰的代码结构有利于代码的传承，增强可读性和可维护性。 123456789推荐：#pragma mark - Life cycle#pragma mark - Publi">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-04-05T03:51:45.203Z">
<meta property="article:modified_time" content="2020-04-05T04:10:06.956Z">
<meta property="article:author" content="chenqg">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2020/04/05/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>代码规范 | chenqg</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">chenqg</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/05/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="chenqg">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="chenqg">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          代码规范
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-04-05 11:51:45 / Modified: 12:10:06" itemprop="dateCreated datePublished" datetime="2020-04-05T11:51:45+08:00">2020-04-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>　　规范的代码，可以有效的提高代码的可读性和可维护性。我们在写代码的过程当中，应该有个这样的规范来约束自己，这在团队开发过程中显得尤为重要。此文列举的iOS代码规范，并不一定是一个完备的规范，后续会不断的进行补充和完善。</p>
<h4 id="代码结构"><a href="#代码结构" class="headerlink" title="代码结构"></a>代码结构</h4><p>清晰的代码结构有利于代码的传承，增强可读性和可维护性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">#pragma mark - Life cycle</span><br><span class="line">#pragma mark - Public methods</span><br><span class="line">#pragma mark - Actions</span><br><span class="line">#pragma mark - Delegate</span><br><span class="line">#pragma mark - Notification</span><br><span class="line">#pragma mark - Internal methods</span><br><span class="line">#pragma mark - Setter</span><br><span class="line">#pragma mark - Getter</span><br></pre></td></tr></table></figure>

<ul>
<li>另外，每行代码最好不超过80个字符，每个函数尽量控制在30行以内，每个文件的代码量尽量控制在300行以内。为了避免文件杂乱，物理文件应该保持和 Xcode 项目文件同步，Xcode 创建的任何组（group）都应该在文件系统有相应的映射。为了更清晰，代码不仅应该按照类型进行分组，也可以根据功能进行分组。</li>
<li>如果可以的话，尽可能一直打开 target Build Settings 中 “Treat Warnings as Errors” 以及一些额外的警告。当然，如果需要忽略指定的警告，可以使用 Clang 的编译特性。</li>
</ul>
<h4 id="间距"><a href="#间距" class="headerlink" title="间距"></a>间距</h4><ul>
<li>一个缩进使用4个空格，永远不要使用制表符(tab)缩进。请确保在Xcode中设置了此偏好。</li>
<li>方法的大括号和其他的大括号(if/else/switch/while 等等)始终和声明在同一行开始，在新的一行结束。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">if (user.isHappy) &#123;</span><br><span class="line">   &#x2F;&#x2F; do something</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  &#x2F;&#x2F; do something else</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方法之间应该正好空一行，这有助于视觉清晰度和代码组织性。在方法中的功能块之间应该使用空白分开，但往往可能应该创建一个新的方法。</li>
<li>@synthesize 和 @dynamic 在实现中每个都应该占一个新行。</li>
</ul>
<h4 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h4><p>　　 条件判断主体部分应该始终使用大括号括住来防止出错，即使它可以不用大括号（例如它只需要一行）。这些错误包括添加第二行（代码）并希望它是 if 语句的一部分时。还有另外一种更危险的，当 if 语句里面的一行被注释掉，下一行就会在不经意间成为了这个 if 语句的一部分。此外，这种风格也更符合所有其他的条件判断，因此也更容易检查。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">if (!error) &#123;</span><br><span class="line">    return success;</span><br><span class="line">&#125;</span><br><span class="line">反对：</span><br><span class="line">if (!error)</span><br><span class="line">    return success;</span><br><span class="line">或</span><br><span class="line">if (!error) return success;</span><br></pre></td></tr></table></figure>

<h4 id="判断"><a href="#判断" class="headerlink" title="==判断"></a>==判断</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;推荐</span><br><span class="line">if ( 6 &#x3D;&#x3D; count) &#123;</span><br><span class="line">  &#x2F;&#x2F;do something</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;反对</span><br><span class="line">if ( count &#x3D;&#x3D; 6) &#123;</span><br><span class="line">  &#x2F;&#x2F;do something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Switch语句"><a href="#Switch语句" class="headerlink" title="Switch语句"></a>Switch语句</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;推荐</span><br><span class="line">switch (integer) &#123;  </span><br><span class="line">  case 1:  &#123;</span><br><span class="line">    &#x2F;&#x2F; ...  </span><br><span class="line">   &#125;</span><br><span class="line">    break;  </span><br><span class="line">  case 2: &#123;  </span><br><span class="line">    &#x2F;&#x2F; ...  </span><br><span class="line">    break;  </span><br><span class="line">  &#125;  </span><br><span class="line">  case 3: &#123;</span><br><span class="line">    &#x2F;&#x2F; ...  </span><br><span class="line">    break; </span><br><span class="line">  &#125;</span><br><span class="line">  default:&#123;</span><br><span class="line">    &#x2F;&#x2F; ...  </span><br><span class="line">    break; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="三目运算符"><a href="#三目运算符" class="headerlink" title="三目运算符"></a>三目运算符</h4><p>　　三目运算符 ? 只有当它可以增加代码清晰度或整洁时才使用。单一的条件都应该优先考虑使用。多条件时通常使用 if 语句会更易懂，或者重构为实例变量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">result &#x3D; a &gt; b ? x : y;</span><br><span class="line">反对：</span><br><span class="line">result &#x3D; a &gt; b ? x &#x3D; c &gt; d ? c : d : y;</span><br></pre></td></tr></table></figure>


<h4 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h4><p>　　当引用一个返回错误参数（error parameter）的方法时，应该针对返回值，而非错误变量。
　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">NSError *error;</span><br><span class="line">if (![self trySomethingWithError:&amp;error]) &#123;</span><br><span class="line">    &#x2F;&#x2F; 处理错误</span><br><span class="line">&#125;</span><br><span class="line">反对：</span><br><span class="line">NSError *error;</span><br><span class="line">[self trySomethingWithError:&amp;error];</span><br><span class="line">if (error) &#123;</span><br><span class="line">    &#x2F;&#x2F; 处理错误</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>一些苹果的 API 在成功的情况下会写一些垃圾值给错误参数（如果非空），所以针对错误变量可能会造成虚假结果（以及接下来的崩溃）。</li>
</ul>
<h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><ul>
<li>在方法签名中，在 -/+ 符号后应该有一个空格。方法片段之间也应该有一个空格。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">- (void)setText:(NSString *)text image:(UIImage *)image;</span><br></pre></td></tr></table></figure>

<ul>
<li>封装类的时候注意开闭原则，用不到的属性或方法都放到.m里，不要暴露在头文件里。</li>
<li>提取方法，去除重复代码。不同类中使用到了相同的逻辑时，应该考虑抽取出工具类，以便于重用。</li>
</ul>
<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><ul>
<li>变量名应该尽可能命名为描述性的，除了 for() 循环外，其他情况都应该避免使用单字母的变量名。 </li>
<li>创建顺序应该是 原子性 &gt; 内存性 &gt; 读写性， 中间只添加一个空格。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">@property (nonatomic, copy, readonly) NSString *name;</span><br><span class="line">@property (nonatomic, assign, readonly) NSUInter age;</span><br></pre></td></tr></table></figure>

<ul>
<li>星号表示指针属于变量，例如：NSString *text 不要写成 NSString* text 或者 NSString * text ，常量除外。 </li>
<li>应该 始终 使用点语法来访问或者修改属性，访问其他实例时首选括号。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;推荐：</span><br><span class="line">view.backgroundColor &#x3D; [UIColor orangeColor];</span><br><span class="line">[UIApplication sharedApplication].delegate;</span><br><span class="line">&#x2F;&#x2F;反对：</span><br><span class="line">[view setBackgroundColor:[UIColor orangeColor]];</span><br><span class="line">UIApplication.sharedApplication.delegate;</span><br></pre></td></tr></table></figure>

<ul>
<li>尽量定义属性来代替直接使用实例变量。除了初始化方法(init， initWithCoder: 等)， dealloc 方法和自定义的 setters 和 getters 内部，应避免直接访问实例变量。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">@interface AdModel: NSObject</span><br><span class="line">@property (nonatomic) NSString *title;</span><br><span class="line">@end</span><br><span class="line">反对：</span><br><span class="line">@interface AdModel : NSObject &#123;</span><br><span class="line"> NSString *title;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="私有属性"><a href="#私有属性" class="headerlink" title="私有属性"></a>私有属性</h4><p>私有属性应该声明在类实现文件的扩展(匿名的类目)中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">&#x2F;&#x2F;在.m文件中</span><br><span class="line">@interface AdView ()</span><br><span class="line">@property (nonatomic, strong) UIWebView *adWebView;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>


<h4 id="属性限定符"><a href="#属性限定符" class="headerlink" title="属性限定符"></a>属性限定符</h4><p>当涉及到 ARC 中被引入变量限定符时，限定符 (__strong, __weak,  __unsafe_unretained, __autoreleasing) 应该位于星号和变量名之间，如：NSString * __weak text。</p>
<h4 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h4><ul>
<li>尽可能遵守苹果的命名约定，尤其那些涉及到内存管理规则的。必要时，可以采用较长的、描述性的方法名和变量名。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">UIButton *settingsButton;</span><br><span class="line">反对：</span><br><span class="line">UIButton *setBut;</span><br></pre></td></tr></table></figure>

<ul>
<li>类名和常量应该始终使用两个或者是三个字母的前缀（例如 CC），但 Core Data 实体名称可以省略。为了代码清晰，常量应该使用相关类的名字作为前缀并使用驼峰命名法。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">static const NSTimeInterval CCArticleViewControllerNavigationFadeAnimationDuration &#x3D; 1;</span><br><span class="line">反对：</span><br><span class="line">static const NSTimeInterval fadetime &#x3D; 1;</span><br></pre></td></tr></table></figure>

<ul>
<li>属性和局部变量应该使用驼峰命名法并且首字母小写。</li>
<li>为了保持一致，实例变量应该使用驼峰命名法命名，并且首字母小写，以下划线为前缀。这与 LLVM 自动合成的实例变量相一致。 </li>
<li>如果 LLVM 可以自动合成变量，那就让它自动合成。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">@synthesize descriptiveVariableName &#x3D; _descriptiveVariableName;</span><br><span class="line">反对：</span><br><span class="line">id varnm;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><ul>
<li>当需要的时候，注释应该被用来解释 为什么 特定代码做了某些事情。所使用的任何注释必须保持最新否则就删除掉。</li>
<li>通常应该避免一大块注释，代码就应该尽量作为自身的文档，只需要隔几行写几句说明。这并不适用于那些用来生成文档的注释。</li>
</ul>
<h4 id="init-和-dealloc"><a href="#init-和-dealloc" class="headerlink" title="init 和 dealloc"></a>init 和 dealloc</h4><p>　　dealloc方法应该放在实现文件的最上面，并且刚好在@synthesize和@dynamic语句的后面。在任何类中，init都应该直接放在dealloc方法的下面。<br><br/> init 方法的结构应该像这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)init &#123;</span><br><span class="line">   self &#x3D; [super init]; &#x2F;&#x2F; 或者调用指定的初始化方法</span><br><span class="line">   if (self) &#123;</span><br><span class="line">    &#x2F;&#x2F; Custom initialization</span><br><span class="line">   &#125;</span><br><span class="line">   return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="字面量"><a href="#字面量" class="headerlink" title="字面量"></a>字面量</h4><p>　　每当创建 NSString、NSDictionary、NSArray和NSNumber 类的不可变实例时，都应该使用字面量。要注意 nil 值不能传给 NSArray 和 NSDictionary 字面量，这样做会导致崩溃。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">NSArray *names &#x3D; @[@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;];</span><br><span class="line">NSDictionary *productManagers &#x3D; @&#123;@&quot;iPhone&quot; : @&quot;Kate&quot;, @&quot;iPad&quot; : @&quot;Kamal&quot;&#125;;</span><br><span class="line">NSNumber *shouldUseLiterals &#x3D; @YES;</span><br><span class="line">NSNumber *buildingZIPCode &#x3D; @10018;</span><br><span class="line">反对：</span><br><span class="line">NSArray *names &#x3D; [NSArray arrayWithObjects:@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;];</span><br><span class="line">NSDictionary *productManagers &#x3D; [NSDictionary dictionaryWithObjectsAndKeys: @&quot;Kate&quot;, @&quot;iPhone&quot;, @&quot;Kamal&quot;, @&quot;iPad&quot;, nil];</span><br><span class="line">NSNumber *shouldUseLiterals &#x3D; [NSNumber numberWithBool:YES];</span><br><span class="line">NSNumber *buildingZIPCode &#x3D; [NSNumber numberWithInteger:10018];</span><br></pre></td></tr></table></figure>


<h4 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h4><p>　　建议在定义NSArray和NSDictionary时使用泛型，可以保证程序的安全性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSArray&lt;NSString *&gt; *testArr &#x3D; [NSArray arrayWithObjects:@&quot;Hello&quot;, @&quot;world&quot;, nil];</span><br><span class="line">NSDictionary&lt;NSString *, NSNumber *&gt; *dic &#x3D; @&#123;@&quot;key&quot;:@&quot;sign&quot;, @&quot;age&quot;:@(99)&#125;;</span><br></pre></td></tr></table></figure>


<h4 id="CGRect-函数"><a href="#CGRect-函数" class="headerlink" title="CGRect 函数"></a>CGRect 函数</h4><p>　　当访问一个CGRect的x、y、width、height时，应该使用CGGeometry 函数代替直接访问结构体成员。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">CGRect frame &#x3D; self.view.frame;</span><br><span class="line">CGFloat x &#x3D; CGRectGetMinX(frame);</span><br><span class="line">CGFloat y &#x3D; CGRectGetMinY(frame);</span><br><span class="line">CGFloat width &#x3D; CGRectGetWidth(frame);</span><br><span class="line">CGFloat height &#x3D; CGRectGetHeight(frame);</span><br><span class="line">反对：</span><br><span class="line">CGRect frame &#x3D; self.view.frame;</span><br><span class="line">CGFloat x &#x3D; frame.origin.x;</span><br><span class="line">CGFloat y &#x3D; frame.origin.y;</span><br><span class="line">CGFloat width &#x3D; frame.size.width;</span><br><span class="line">CGFloat height &#x3D; frame.size.height;</span><br></pre></td></tr></table></figure>


<h4 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h4><p>　　常量首选内联字符串字面量或数字，因为常量可以轻易重用并且可以快速改变而不需要查找和替换。常量应该声明为 static 常量而不是 #define ，除非非常明确地要当做宏来使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">static NSString * const NYTAboutViewControllerCompanyName &#x3D; @&quot;The New York Times Company&quot;;</span><br><span class="line">static const CGFloat NYTImageThumbnailHeight &#x3D; 50.0;</span><br><span class="line">反对：</span><br><span class="line">#define CompanyName @&quot;The New York Times Company&quot;</span><br><span class="line">#define thumbnailHeight 2</span><br></pre></td></tr></table></figure>


<h4 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h4><p>　　当使用 enum 时，建议使用新的基础类型规范，因为它具有更强的类型检查和代码补全功能。现在 SDK 包含了一个宏来鼓励使用使用新的基础类型 - NS_ENUM()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">typedef NS_ENUM(NSInteger, AdType) &#123;</span><br><span class="line">   AdVideoType,</span><br><span class="line">   AdPictureType</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="位掩码"><a href="#位掩码" class="headerlink" title="位掩码"></a>位掩码</h4><p>当用到位掩码时，使用 NS_OPTIONS 宏。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">举例：</span><br><span class="line">typedef NS_OPTIONS(NSUInteger, AdType) &#123;</span><br><span class="line">    AdVideoType    &#x3D; 1 &lt;&lt; 0,</span><br><span class="line">    AdPictureType  &#x3D; 1 &lt;&lt; 1,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="图片命名"><a href="#图片命名" class="headerlink" title="图片命名"></a>图片命名</h4><p>　　图片名称应该被统一命名以保持组织的完整。它们应该被命名为一个说明它们用途的驼峰式字符串，其次是自定义类或属性的无前缀名字（如果有的话），然后进一步说明颜色 和/或 展示位置，最后是它们的状态。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">1. RefreshBarButtonItem &#x2F; RefreshBarButtonItem@2x 和 RefreshBarButtonItemSelected &#x2F; RefreshBarButtonItemSelected@2x</span><br><span class="line">2. ArticleNavigationBarWhite &#x2F; ArticleNavigationBarWhite@2x 和 ArticleNavigationBarBlackSelected &#x2F; ArticleNavigationBarBlackSelected@2x.</span><br></pre></td></tr></table></figure>
<p>图片目录中被用于类似目的的图片应归入各自的组中。</p>
<h4 id="布尔"><a href="#布尔" class="headerlink" title="布尔"></a>布尔</h4><p>　　因为 nil 解析为 NO，所以没有必要在条件中与它进行比较。永远不要直接和 YES 进行比较，因为 YES 被定义为 1，而 BOOL 可以多达 8 位。<br>这使得整个文件有更多的一致性和更大的视觉清晰度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">推荐：</span><br><span class="line">if (!someObject) &#123;</span><br><span class="line">   &#x2F;&#x2F;do something</span><br><span class="line">&#125;</span><br><span class="line">反对：</span><br><span class="line">if (someObject &#x3D;&#x3D; nil) &#123;</span><br><span class="line">   &#x2F;&#x2F;do something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">对于 BOOL 来说, 有两种用法:</span><br><span class="line">if (isAwesome)</span><br><span class="line">if (![someObject boolValue])</span><br><span class="line">反对：</span><br><span class="line">if ([someObject boolValue] &#x3D;&#x3D; NO)</span><br><span class="line">if (isAwesome &#x3D;&#x3D; YES) &#x2F;&#x2F; 永远别这么做</span><br></pre></td></tr></table></figure>

<ul>
<li>如果一个 BOOL 属性名称是一个形容词，属性可以省略 “is” 前缀，但为 get 访问器指定一个惯用的名字，例如：<br><code>@property (assign, getter=isEditable) BOOL editable;</code></li>
</ul>
<h4 id="return"><a href="#return" class="headerlink" title="return"></a>return</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;推荐</span><br><span class="line">- (void)someMethod &#123; </span><br><span class="line">  if (!goodCondition) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;&#x2F;Do something</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;反对</span><br><span class="line">- (void)someMethod &#123; </span><br><span class="line">  if (goodCondition) &#123;</span><br><span class="line">    &#x2F;&#x2F;Do something</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="单例"><a href="#单例" class="headerlink" title="单例"></a>单例</h4><p>单例对象应该使用线程安全的模式创建共享的实例。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+ (instancetype)sharedInstance &#123;</span><br><span class="line">    static id sharedInstance &#x3D; nil;</span><br><span class="line">    static dispatch_once_t onceToken;</span><br><span class="line">    dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">        sharedInstance &#x3D; [[self alloc] init];</span><br><span class="line">    &#125;);</span><br><span class="line">    return sharedInstance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果需要禁止使用init、copy这类方法新建对象，还需要重写allocWithZone、copyWithZone、init、copy、mutableCopy这些方法。</li>
</ul>
<h4 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h4><p>　　如果有一个以上的 import 语句，就对这些语句进行分组。每个分组的注释是可选的。<br>注：对于模块使用 @import 语法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Frameworks</span><br><span class="line">@import QuartzCore;</span><br><span class="line">&#x2F;&#x2F; Models</span><br><span class="line">#import &quot;UserModel.h&quot;</span><br><span class="line">&#x2F;&#x2F; Views</span><br><span class="line">#import &quot;AdView.h&quot;</span><br></pre></td></tr></table></figure>

<h4 id="push代码"><a href="#push代码" class="headerlink" title="push代码"></a>push代码</h4><ul>
<li>注意拉取远端的新代码：切记要拉取最新的代码到本地，确保要提交的代码不会跟远端代码冲突，如果存在冲突，需要解决冲突之后再提交代码。</li>
<li>代码 review ：不要着急push，要再次 review 所提交的代码，确定是不是必需的、是不是没有问题的。</li>
<li>注释：提交代码时，应该注明自己提交代码的变动内容，不用赘述，但一定要明晰。</li>
<li>分块提交：不要一次性提交大量的代码，应该在开发过程中分模块逐步提交代码。</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/2020/04/05/%E7%BB%84%E4%BB%B6%E6%8B%86%E5%88%86/" rel="next" title="组件拆分">
      组件拆分 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#代码结构"><span class="nav-number">1.</span> <span class="nav-text">代码结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#间距"><span class="nav-number">2.</span> <span class="nav-text">间距</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#条件判断"><span class="nav-number">3.</span> <span class="nav-text">条件判断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#判断"><span class="nav-number">4.</span> <span class="nav-text">&#x3D;&#x3D;判断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Switch语句"><span class="nav-number">5.</span> <span class="nav-text">Switch语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三目运算符"><span class="nav-number">6.</span> <span class="nav-text">三目运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#错误处理"><span class="nav-number">7.</span> <span class="nav-text">错误处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法"><span class="nav-number">8.</span> <span class="nav-text">方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#属性"><span class="nav-number">9.</span> <span class="nav-text">属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#私有属性"><span class="nav-number">10.</span> <span class="nav-text">私有属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#属性限定符"><span class="nav-number">11.</span> <span class="nav-text">属性限定符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#命名"><span class="nav-number">12.</span> <span class="nav-text">命名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#注释"><span class="nav-number">13.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#init-和-dealloc"><span class="nav-number">14.</span> <span class="nav-text">init 和 dealloc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字面量"><span class="nav-number">15.</span> <span class="nav-text">字面量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#泛型"><span class="nav-number">16.</span> <span class="nav-text">泛型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CGRect-函数"><span class="nav-number">17.</span> <span class="nav-text">CGRect 函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常量"><span class="nav-number">18.</span> <span class="nav-text">常量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#枚举类型"><span class="nav-number">19.</span> <span class="nav-text">枚举类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#位掩码"><span class="nav-number">20.</span> <span class="nav-text">位掩码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#图片命名"><span class="nav-number">21.</span> <span class="nav-text">图片命名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#布尔"><span class="nav-number">22.</span> <span class="nav-text">布尔</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#return"><span class="nav-number">23.</span> <span class="nav-text">return</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#单例"><span class="nav-number">24.</span> <span class="nav-text">单例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#导入"><span class="nav-number">25.</span> <span class="nav-text">导入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#push代码"><span class="nav-number">26.</span> <span class="nav-text">push代码</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">chenqg</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chenqg</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
